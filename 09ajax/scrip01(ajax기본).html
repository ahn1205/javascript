<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button type="button" oncclick>에이잭스 요청</button>
    아이디:<p class="id"></p>
    이름:<p class="name"></p>
    나이:<p class="age"></p>
    <script>
        function ajax(){
        //  1nd
         //   fetch("hi.txt").then(function(respose){
          //      respose.text().then(function(text) {  
          //          alert(text);
                  
         //   })
                
          //  })

            //2nd
            //then은 익명 함수를 실행할 때 실행의 결과를 받아 처리할 함수를 넣어 줍니다.
            //이러한 함수를  callback함수 (중요) 실행 ~ 결돠 받기 하는것 
            //비동기는 다른 함수의 실행과 동시네 순서없이 실행됩니다.
            // var callback = function(){
            //     console.log(1)
                
            // }
            // fetc("hi.txt").then(callback );
            // console.log(2)
            
            //3nd
            //콜백함수 첫번째 매개변수 response에 성공실패에 관련된 중요한 내용을 담아줍니다.
            //text나 json()함수를 이용해서 다시한번 콜백함수로 문서에 내용을 전달 받습니다.
            // fetch("hi.txt").then(function(response) {
            //     //console.log(response)
            //     if(response.status == 404){
            //         alert("요청 성공");
            //         return;
            //     }else {
                    
            //         //console.log(respose.text()) //프로미스 
            //         response.text().then(function(data){
            //             console.log(data);
            //         })
                    
            //     }
                 
                
            // })
            
            //4nd 
            fetch("hi.json").then(function(response){
                if(response.status == 404){
                    alert("요청에 실패");
                    return;
                }else{
                    return response.json();//다음 callback함수 then으로 데이터를 리턴
                }
            }).then(function(data){
                console.log(data);
                var id = data.user_id;
                var name = data.user_name;
                var age = data.user_age;

                document.querySelector(".id").innerHTML = id;
                document.querySelector(".name").innerHTML = name;
                document.querySelector(".age").innerHTML = age;

            })





        }

    </script>
</body>
</html>
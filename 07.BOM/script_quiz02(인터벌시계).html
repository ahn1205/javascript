<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <style>
       .bgimg{
           position: relative;
           top:0; left: 0; width: 100%; height: 100%;
           z-index: -1;
       }

       .clock {
           position: absolute; left: 10; top: 0; color: aliceblue;
       }
   </style>

</head>
<body data-img='{"1":"img/1.jpg", "2":"img/2.jpg", "3": "img/3.jpg", "4":"img/4.jpg"}'>
    <img src="img/1.jpg" class="bgImg">
    
    <div class="clock">
        <h2>00:00:00</h2>
    </div>

    <script>
        var clock = document.querySelector(".clock h2");
        function createTime(){
            /*
            1.이함수를 1초마다 실행
            2.date 객체 생성 
            3.getHours(), getMinute(), getSeacond() 함수를 이용해서 날짜를 조합
            4.조합한 결과를 h2태그에 반영
            */
          var date = new Date();
          var hours = date.getHours();//
          var Minutes =  date.getMinutes();
          var Seconds = date.getSeconds();
         
         //console.log(hours, Minutes, Seconds)
         
         var time = (hours < 10 ? "0"+hours : hours) + ":" +
            (Minutes < 10 ? "0"+Minutes : Minutes) + ":"+
            (Seconds < 10 ? "0"+Seconds:Seconds);
        
        //ex6문법
        //var time = '${hours < 10 ? `0${hours}`: hours}':
        //var time = '${Minutes < 10 ? `0${Minutes}`: Minutes}':
        //var time = '${Seconds < 10 ? `0${Seconds}`: Seconds}'; 
            clock.innerHTML = time;
        }
      
        var body = document.querySelector("body");
        var count = 0;
        var data = body.dataset.img
        var result = JSON.parse(data);
        function changeBackground(){
            /*
            1.이 함수는 10초마다 실행
            2.body에 있는 dataset객체를 얻어옵니다.
            3.img태그를 생성하고 경로를 src에 추가
            4.class에 bgimg추가
            5.body에 appendchild로 이미지를 추가
            */
            //console.log(body.dataset.img) //

            //이미지 생성 
            console.log("result : " + result);
            var img = document.createElement("img");//img생성 
            img.src = result[++count];//src에 이미지 경로 추가
            //console.log(result[count]);
            img.className = "bgImg";//클래스 이름 추가

            body.appendChild(img);
            
            //객체의 길이를 구하는 방법
            if(count === Object.keys(result).length) count = 0;
        }
        

        (function(){
            createTime();//시작시에 호출
            setInterval(createTime, 1000)//1초마다 생성 
            changeBackground();
            setInterval(changeBackground, 1000)
           } )();
    </script>
</body>
</html>